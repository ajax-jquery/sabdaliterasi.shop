---
layout: null
permalink: /wp-admin/upload-ebook/
---
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload Ebook ke GitHub</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f6f6f6;
    margin: 0;
    padding: 40px;
    display: flex;
    justify-content: center;
  }

  form {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,.1);
    max-width: 480px;
    width: 100%;
  }

  h2 {
    margin-bottom: 20px;
    text-align: center;
  }

  label {
    display: block;
    font-weight: 600;
    margin-top: 15px;
  }

  input {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border: 1px solid #ccc;
    border-radius: 8px;
  }

  button {
    margin-top: 25px;
    background: #111827;
    color: white;
    padding: 12px 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    width: 100%;
  }

  button:disabled {
    background: #666;
  }

  #output {
    margin-top: 18px;
    font-size: 14px;
    color: #333;
    white-space: pre-wrap;
  }
</style>
</head>
<body>
  <form id="ebookForm">
    <h2>Upload Redirect Ebook</h2>

    <label for="judul">Judul Ebook</label>
    <input type="text" id="judul" name="judul" placeholder="Contoh: Filsafat Absurdisme" required>

    <label for="link">Link File PDF</label>
    <input type="url" id="link" name="link" placeholder="https://example.com/file.pdf" required>

    <label for="image">Gambar Thumbnail</label>
    <input type="url" id="image" name="image" placeholder="https://example.com/image.jpg" required>

    <button type="submit">Kirim ke GitHub</button>
    <div id="output"></div>
  </form>

<script>
async function pushToGithub(a) {
  const REPO = "sabdaliterasi.shop";
  const FILE_PATH = `ebook/${a.permalink}.html`;


  const content = `---
layout: null
permalink: /free-ebook/${a.permalink}/
image: ${a.image}
title: ${a.judul}.pdf
---
<html>
<head>
<meta http-equiv="refresh" content="0; url=${a.link}">
<script>location.href=${a.link}<\/script>
<meta class="yoast-seo-meta-tag"  charset="UTF-8" />
      <meta content='width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=5' name='viewport'/>
      <link rel="profile" href="https://gmpg.org/xfn/11" />
      <title>Download Secara Gratis Ebook ${a.judul}.pdf |  Sabda Literasi Palu</title>
      <meta content="${a.image}" name="image"/>
<meta name="twitter:image:alt" content="${a.judul}.pdf |  Sabda Literasi Palu" />
<meta property="og:image:alt" content="${a.judul}.pdf |  Sabda Literasi Palu" />
<meta content="${a.image}" name="twitter:image" />
<link href="${a.image}" rel="image_src" />
 <meta name="description" content="Nikmati Download Secara Gratis Ebook ${a.judul}.pdf.  Klik sekarang juga!" />
 <style></style>
</head>
<body>
<p style="display:none">Download Gratis Ebook ${a.judul}.pdf</p> 
 <style>
    #loading-overlay{align-items:center;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);background:rgba(0,0,0,.8);display:flex;inset:0;justify-content:center;opacity:1;pointer-events:auto;position:fixed;transition:opacity .22s cubic-bezier(.2,.8,.2,1);z-index:99999}#loading-overlay.hidden{opacity:0;pointer-events:none;visibility:hidden}.loading-box{align-items:center;backdrop-filter:none;background:hsla(0,0%,100%,.06);border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.45);color:#fff;display:flex;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial;gap:16px;max-width:90%;padding:18px 22px;user-select:none}.spinner{animation:spin .9s linear infinite;border:4px solid hsla(0,0%,100%,.12);border-radius:50%;border-top-color:hsla(0,0%,100%,.95);box-sizing:border-box;height:44px;width:44px}@keyframes spin{to{transform:rotate(1turn)}}.loading-text{color:#fff;font-size:15px;letter-spacing:.1px;line-height:1}.loading-sub{color:#e8e8e8;display:block;font-size:12px;margin-top:6px;opacity:.85}.fade-in-up{animation:fadeUp .32s cubic-bezier(.2,.8,.2,1) forwards;opacity:0;transform:translateY(6px)}@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}@media (max-width:420px){.spinner{border-width:3px;height:36px;width:36px}.loading-box{border-radius:10px;gap:12px;padding:12px 14px}}</style>
  <div id="loading-overlay" role="status" aria-live="polite" aria-hidden="true">
    <div class="loading-box fade-in-up" aria-hidden="false">
      <div class="spinner" aria-hidden="true"></div>
      <div class="loading-text">
        Memuat...
        <span class="loading-sub">Tunggu sebentar â€” halaman sedang dimuat.</span>
      </div>
    </div>
  </div>
</body>
</html>
`;

  const encoded = btoa(unescape(encodeURIComponent(content)));

  // cek apakah file sudah ada
  const check = await fetch(`/api/github/l1bBD4/${REPO}/contents/${FILE_PATH}`, {
    headers: {
      Accept: "application/vnd.github+json",
    },
  });

  let sha;
  if (check.ok) {
    const data = await check.json();
    sha = data.sha;
  }

  // kirim PUT
  const res = await fetch(`/api/github/l1bBD4/${REPO}/contents/${FILE_PATH}`, {
    method: "PUT",
    headers: {
      Accept: "application/vnd.github+json",
    },
    body: JSON.stringify({
      message: "create redirect page",
      content: encoded,
      sha, // hanya diisi kalau file sudah ada
    }),
  });

  const json = await res.json();
  console.log(json)
  return json
}

document.getElementById("ebookForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const btn = e.target.querySelector("button");
  const out = document.getElementById("output");

  btn.disabled = true;
  btn.textContent = "Mengunggah...";
  out.textContent = "";
const a=e.target.link.value.trim();
  const b=a.replace("https://m.sabdaliterasi.xyz/","").replace(".pdf",'')
  const data = {
    judul: e.target.judul.value.trim(),
    permalink: b,
    link: a,
    image: e.target.image.value.trim(),
  };

  try {
    const result = await pushToGithub(data);
    out.textContent = JSON.stringify(result, null, 2);
    document.getElementById("ebookForm").reset();
  } catch (err) {
    out.textContent = "Error: " + err.message;
  } finally {
    btn.disabled = false;
    btn.textContent = "Kirim ke GitHub";
  }
});
</script>
</body>
</html>
